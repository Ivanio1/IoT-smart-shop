{"ast":null,"code":"var _jsxFileName = \"/home/ivan/IdeaProjects/tpo1/vk-auth-react-nestjs/frontend/src/pages/UserPage/index.tsx\";\nimport React from \"react\";\nimport { observer, inject } from \"mobx-react\";\nimport { withRouter } from \"react-router-dom\";\nimport LayoutUser from \"components/LayoutUser\";\nimport { RequestState } from \"types/RequestState\";\nimport UserStore from \"stores/UserStore\";\nimport styles from \"./UserPage.module.scss\";\n\nclass UserPage extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    this.handleLogout = () => {\n      UserStore.logout();\n      this.props.history.push(\"/\");\n    };\n  }\n\n  componentDidMount() {\n    const token = sessionStorage.getItem(\"token\");\n    if (!token) return this.props.history.push(\"/signin\");\n  }\n\n  render() {\n    const {\n      state,\n      user\n    } = this.props.UserStore;\n    if (state === RequestState.ERROR) return /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 46\n      }\n    }, \"Erorr\");\n\n    if (state !== RequestState.SUCCESS) {\n      return /*#__PURE__*/React.createElement(LayoutUser, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 35,\n          columnNumber: 11\n        }\n      }, \"Loading...\"));\n    }\n\n    return /*#__PURE__*/React.createElement(LayoutUser, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles[\"user-page\"],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: user.avatar_url,\n      alt: \"vk avatar\",\n      className: styles[\"user-page__avatar\"],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      className: styles[\"user-page__name\"],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 11\n      }\n    }, user.name), /*#__PURE__*/React.createElement(\"p\", {\n      className: styles[\"user-page__email\"],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 11\n      }\n    }, user.email), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.handleLogout,\n      className: styles[\"user-page__logout\"],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 11\n      }\n    }, \"\\u0412\\u044B\\u0439\\u0442\\u0438\")));\n  }\n\n}\n\nexport default inject(\"UserStore\")(withRouter(observer(UserPage)));","map":{"version":3,"sources":["/home/ivan/IdeaProjects/tpo1/vk-auth-react-nestjs/frontend/src/pages/UserPage/index.tsx"],"names":["React","observer","inject","withRouter","LayoutUser","RequestState","UserStore","styles","UserPage","Component","handleLogout","logout","props","history","push","componentDidMount","token","sessionStorage","getItem","render","state","user","ERROR","SUCCESS","avatar_url","name","email"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,EAAmBC,MAAnB,QAAiC,YAAjC;AACA,SAA8BC,UAA9B,QAAgD,kBAAhD;AAEA,OAAOC,UAAP,MAAuB,uBAAvB;AAEA,SAASC,YAAT,QAA6B,oBAA7B;AACA,OAAOC,SAAP,MAAsB,kBAAtB;AAEA,OAAOC,MAAP,MAAmB,wBAAnB;;AAMA,MAAMC,QAAN,SAAuBR,KAAK,CAACS,SAA7B,CAA+C;AAAA;AAAA;;AAAA,SAM7CC,YAN6C,GAM9B,MAAM;AACnBJ,MAAAA,SAAS,CAACK,MAAV;AACA,WAAKC,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB;AACD,KAT4C;AAAA;;AAC7CC,EAAAA,iBAAiB,GAAG;AAClB,UAAMC,KAAK,GAAGC,cAAc,CAACC,OAAf,CAAuB,OAAvB,CAAd;AACA,QAAI,CAACF,KAAL,EAAY,OAAO,KAAKJ,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,SAAxB,CAAP;AACb;;AAODK,EAAAA,MAAM,GAAG;AACP,UAAM;AAAEC,MAAAA,KAAF;AAASC,MAAAA;AAAT,QAAkB,KAAKT,KAAL,CAAWN,SAAnC;AAEA,QAAIc,KAAK,KAAKf,YAAY,CAACiB,KAA3B,EAAkC,oBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAP;;AAElC,QAAIF,KAAK,KAAKf,YAAY,CAACkB,OAA3B,EAAoC;AAClC,0BACE,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,CADF;AAKD;;AAED,wBACE,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAEhB,MAAM,CAAC,WAAD,CAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AACE,MAAA,GAAG,EAAEc,IAAI,CAACG,UADZ;AAEE,MAAA,GAAG,EAAC,WAFN;AAGE,MAAA,SAAS,EAAEjB,MAAM,CAAC,mBAAD,CAHnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAME;AAAG,MAAA,SAAS,EAAEA,MAAM,CAAC,iBAAD,CAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA0Cc,IAAI,CAACI,IAA/C,CANF,eAOE;AAAG,MAAA,SAAS,EAAElB,MAAM,CAAC,kBAAD,CAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA2Cc,IAAI,CAACK,KAAhD,CAPF,eAQE;AACE,MAAA,OAAO,EAAE,KAAKhB,YADhB;AAEE,MAAA,SAAS,EAAEH,MAAM,CAAC,mBAAD,CAFnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wCARF,CADF,CADF;AAmBD;;AA3C4C;;AA8C/C,eAAeL,MAAM,CAAC,WAAD,CAAN,CAAoBC,UAAU,CAACF,QAAQ,CAACO,QAAD,CAAT,CAA9B,CAAf","sourcesContent":["import React from \"react\";\nimport { observer, inject } from \"mobx-react\";\nimport { RouteComponentProps, withRouter } from \"react-router-dom\";\n\nimport LayoutUser from \"components/LayoutUser\";\n\nimport { RequestState } from \"types/RequestState\";\nimport UserStore from \"stores/UserStore\";\n\nimport styles from \"./UserPage.module.scss\";\n\ninterface IProps extends RouteComponentProps {\n  UserStore: typeof UserStore;\n}\n\nclass UserPage extends React.Component<IProps> {\n  componentDidMount() {\n    const token = sessionStorage.getItem(\"token\");\n    if (!token) return this.props.history.push(\"/signin\");\n  }\n\n  handleLogout = () => {\n    UserStore.logout();\n    this.props.history.push(\"/\");\n  };\n\n  render() {\n    const { state, user } = this.props.UserStore;\n\n    if (state === RequestState.ERROR) return <p>Erorr</p>;\n\n    if (state !== RequestState.SUCCESS) {\n      return (\n        <LayoutUser>\n          <p>Loading...</p>\n        </LayoutUser>\n      );\n    }\n\n    return (\n      <LayoutUser>\n        <div className={styles[\"user-page\"]}>\n          <img\n            src={user.avatar_url}\n            alt=\"vk avatar\"\n            className={styles[\"user-page__avatar\"]}\n          />\n          <p className={styles[\"user-page__name\"]}>{user.name}</p>\n          <p className={styles[\"user-page__email\"]}>{user.email}</p>\n          <button\n            onClick={this.handleLogout}\n            className={styles[\"user-page__logout\"]}\n          >\n            Выйти\n          </button>\n        </div>\n      </LayoutUser>\n    );\n  }\n}\n\nexport default inject(\"UserStore\")(withRouter(observer(UserPage)));\n"]},"metadata":{},"sourceType":"module"}