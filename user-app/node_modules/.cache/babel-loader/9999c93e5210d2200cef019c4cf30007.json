{"ast":null,"code":"var _jsxFileName = \"/Users/isobolev/IdeaProjects/IoT-smart-shop/user-app/src/pages/UserPage/index.tsx\";\nimport React from \"react\";\nimport { observer, inject } from \"mobx-react\";\nimport { withRouter } from \"react-router-dom\";\nimport LayoutUser from \"components/LayoutUser\";\nimport { RequestState } from \"types/RequestState\";\nimport UserStore from \"stores/UserStore\";\nimport styles from \"./UserPage.module.scss\";\nclass UserPage extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.handleLogout = () => {\n      UserStore.logout();\n      this.props.history.push(\"/\");\n    };\n  }\n  componentDidMount() {\n    const token = sessionStorage.getItem(\"token\");\n    if (!token) return this.props.history.push(\"/signin\");\n  }\n  render() {\n    const {\n      state,\n      user\n    } = this.props.UserStore;\n    if (state === RequestState.ERROR) return /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 46\n      }\n    }, \"Erorr\");\n    if (state !== RequestState.SUCCESS) {\n      return /*#__PURE__*/React.createElement(LayoutUser, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 35,\n          columnNumber: 11\n        }\n      }, \"Loading...\"));\n    }\n    return /*#__PURE__*/React.createElement(LayoutUser, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles[\"user-page\"],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: user.avatar_url,\n      alt: \"vk avatar\",\n      className: styles[\"user-page__avatar\"],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      className: styles[\"user-page__name\"],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 11\n      }\n    }, user.name), /*#__PURE__*/React.createElement(\"p\", {\n      className: styles[\"user-page__email\"],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 11\n      }\n    }, user.email), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.handleLogout,\n      className: styles[\"user-page__logout\"],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 11\n      }\n    }, \"\\u0412\\u044B\\u0439\\u0442\\u0438\")));\n  }\n}\nexport default inject(\"UserStore\")(withRouter(observer(UserPage)));","map":{"version":3,"names":["React","observer","inject","withRouter","LayoutUser","RequestState","UserStore","styles","UserPage","Component","constructor","args","handleLogout","logout","props","history","push","componentDidMount","token","sessionStorage","getItem","render","state","user","ERROR","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","SUCCESS","className","src","avatar_url","alt","name","email","onClick"],"sources":["/Users/isobolev/IdeaProjects/IoT-smart-shop/user-app/src/pages/UserPage/index.tsx"],"sourcesContent":["import React from \"react\";\nimport { observer, inject } from \"mobx-react\";\nimport { RouteComponentProps, withRouter } from \"react-router-dom\";\n\nimport LayoutUser from \"components/LayoutUser\";\n\nimport { RequestState } from \"types/RequestState\";\nimport UserStore from \"stores/UserStore\";\n\nimport styles from \"./UserPage.module.scss\";\n\ninterface IProps extends RouteComponentProps {\n  UserStore: typeof UserStore;\n}\n\nclass UserPage extends React.Component<IProps> {\n  componentDidMount() {\n    const token = sessionStorage.getItem(\"token\");\n    if (!token) return this.props.history.push(\"/signin\");\n  }\n\n  handleLogout = () => {\n    UserStore.logout();\n    this.props.history.push(\"/\");\n  };\n\n  render() {\n    const { state, user } = this.props.UserStore;\n\n    if (state === RequestState.ERROR) return <p>Erorr</p>;\n\n    if (state !== RequestState.SUCCESS) {\n      return (\n        <LayoutUser>\n          <p>Loading...</p>\n        </LayoutUser>\n      );\n    }\n\n    return (\n      <LayoutUser>\n        <div className={styles[\"user-page\"]}>\n          <img\n            src={user.avatar_url}\n            alt=\"vk avatar\"\n            className={styles[\"user-page__avatar\"]}\n          />\n          <p className={styles[\"user-page__name\"]}>{user.name}</p>\n          <p className={styles[\"user-page__email\"]}>{user.email}</p>\n          <button\n            onClick={this.handleLogout}\n            className={styles[\"user-page__logout\"]}\n          >\n            Выйти\n          </button>\n        </div>\n      </LayoutUser>\n    );\n  }\n}\n\nexport default inject(\"UserStore\")(withRouter(observer(UserPage)));\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}