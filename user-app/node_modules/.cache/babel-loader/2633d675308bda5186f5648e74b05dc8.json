{"ast":null,"code":"var PersistedDataFactory = function () {\n  function PersistedDataFactory() {}\n\n  PersistedDataFactory.createDefault = function () {\n    return {\n      hasPermission: false,\n      lastUsedCameraId: null\n    };\n  };\n\n  return PersistedDataFactory;\n}();\n\nvar PersistedDataManager = function () {\n  function PersistedDataManager() {\n    this.data = PersistedDataFactory.createDefault();\n    var data = localStorage.getItem(PersistedDataManager.LOCAL_STORAGE_KEY);\n\n    if (!data) {\n      this.reset();\n    } else {\n      this.data = JSON.parse(data);\n    }\n  }\n\n  PersistedDataManager.prototype.hasCameraPermissions = function () {\n    return this.data.hasPermission;\n  };\n\n  PersistedDataManager.prototype.getLastUsedCameraId = function () {\n    return this.data.lastUsedCameraId;\n  };\n\n  PersistedDataManager.prototype.setHasPermission = function (hasPermission) {\n    this.data.hasPermission = hasPermission;\n    this.flush();\n  };\n\n  PersistedDataManager.prototype.setLastUsedCameraId = function (lastUsedCameraId) {\n    this.data.lastUsedCameraId = lastUsedCameraId;\n    this.flush();\n  };\n\n  PersistedDataManager.prototype.resetLastUsedCameraId = function () {\n    this.data.lastUsedCameraId = null;\n    this.flush();\n  };\n\n  PersistedDataManager.prototype.reset = function () {\n    this.data = PersistedDataFactory.createDefault();\n    this.flush();\n  };\n\n  PersistedDataManager.prototype.flush = function () {\n    localStorage.setItem(PersistedDataManager.LOCAL_STORAGE_KEY, JSON.stringify(this.data));\n  };\n\n  PersistedDataManager.LOCAL_STORAGE_KEY = \"HTML5_QRCODE_DATA\";\n  return PersistedDataManager;\n}();\n\nexport { PersistedDataManager };","map":{"version":3,"sources":["../../src/storage.ts"],"names":[],"mappings":"AAeA,IAAA,oBAAA,GAAA,YAAA;AAAA,WAAA,oBAAA,GAAA,CAOC;;AANU,EAAA,oBAAA,CAAA,aAAA,GAAP,YAAA;AACI,WAAO;AACH,MAAA,aAAa,EAAE,KADZ;AAEH,MAAA,gBAAgB,EAAE;AAFf,KAAP;AAIH,GALM;;AAMX,SAAA,oBAAA;AAAC,CAPD,EAAA;;AASA,IAAA,oBAAA,GAAA,YAAA;AAKI,WAAA,oBAAA,GAAA;AAHQ,SAAA,IAAA,GAAsB,oBAAoB,CAAC,aAArB,EAAtB;AAIJ,QAAI,IAAI,GAAG,YAAY,CAAC,OAAb,CAAqB,oBAAoB,CAAC,iBAA1C,CAAX;;AACA,QAAI,CAAC,IAAL,EAAW;AACP,WAAK,KAAL;AACH,KAFD,MAEO;AACH,WAAK,IAAL,GAAY,IAAI,CAAC,KAAL,CAAW,IAAX,CAAZ;AACH;AACJ;;AAEM,EAAA,oBAAA,CAAA,SAAA,CAAA,oBAAA,GAAP,YAAA;AACI,WAAO,KAAK,IAAL,CAAU,aAAjB;AACH,GAFM;;AAIA,EAAA,oBAAA,CAAA,SAAA,CAAA,mBAAA,GAAP,YAAA;AACI,WAAO,KAAK,IAAL,CAAU,gBAAjB;AACH,GAFM;;AAIA,EAAA,oBAAA,CAAA,SAAA,CAAA,gBAAA,GAAP,UAAwB,aAAxB,EAA8C;AAC1C,SAAK,IAAL,CAAU,aAAV,GAA0B,aAA1B;AACA,SAAK,KAAL;AACH,GAHM;;AAKA,EAAA,oBAAA,CAAA,SAAA,CAAA,mBAAA,GAAP,UAA2B,gBAA3B,EAAmD;AAC/C,SAAK,IAAL,CAAU,gBAAV,GAA6B,gBAA7B;AACA,SAAK,KAAL;AACH,GAHM;;AAKA,EAAA,oBAAA,CAAA,SAAA,CAAA,qBAAA,GAAP,YAAA;AACI,SAAK,IAAL,CAAU,gBAAV,GAA6B,IAA7B;AACA,SAAK,KAAL;AACH,GAHM;;AAKA,EAAA,oBAAA,CAAA,SAAA,CAAA,KAAA,GAAP,YAAA;AACI,SAAK,IAAL,GAAY,oBAAoB,CAAC,aAArB,EAAZ;AACA,SAAK,KAAL;AACH,GAHM;;AAKC,EAAA,oBAAA,CAAA,SAAA,CAAA,KAAA,GAAR,YAAA;AACI,IAAA,YAAY,CAAC,OAAb,CACI,oBAAoB,CAAC,iBADzB,EAEI,IAAI,CAAC,SAAL,CAAe,KAAK,IAApB,CAFJ;AAGH,GAJO;;AAvCO,EAAA,oBAAA,CAAA,iBAAA,GAA4B,mBAA5B;AA4CnB,SAAA,oBAAA;AAAC,CA/CD,EAAA;;SAAa,oB","sourceRoot":"","sourcesContent":["var PersistedDataFactory = (function () {\n    function PersistedDataFactory() {\n    }\n    PersistedDataFactory.createDefault = function () {\n        return {\n            hasPermission: false,\n            lastUsedCameraId: null\n        };\n    };\n    return PersistedDataFactory;\n}());\nvar PersistedDataManager = (function () {\n    function PersistedDataManager() {\n        this.data = PersistedDataFactory.createDefault();\n        var data = localStorage.getItem(PersistedDataManager.LOCAL_STORAGE_KEY);\n        if (!data) {\n            this.reset();\n        }\n        else {\n            this.data = JSON.parse(data);\n        }\n    }\n    PersistedDataManager.prototype.hasCameraPermissions = function () {\n        return this.data.hasPermission;\n    };\n    PersistedDataManager.prototype.getLastUsedCameraId = function () {\n        return this.data.lastUsedCameraId;\n    };\n    PersistedDataManager.prototype.setHasPermission = function (hasPermission) {\n        this.data.hasPermission = hasPermission;\n        this.flush();\n    };\n    PersistedDataManager.prototype.setLastUsedCameraId = function (lastUsedCameraId) {\n        this.data.lastUsedCameraId = lastUsedCameraId;\n        this.flush();\n    };\n    PersistedDataManager.prototype.resetLastUsedCameraId = function () {\n        this.data.lastUsedCameraId = null;\n        this.flush();\n    };\n    PersistedDataManager.prototype.reset = function () {\n        this.data = PersistedDataFactory.createDefault();\n        this.flush();\n    };\n    PersistedDataManager.prototype.flush = function () {\n        localStorage.setItem(PersistedDataManager.LOCAL_STORAGE_KEY, JSON.stringify(this.data));\n    };\n    PersistedDataManager.LOCAL_STORAGE_KEY = \"HTML5_QRCODE_DATA\";\n    return PersistedDataManager;\n}());\nexport { PersistedDataManager };\n//# sourceMappingURL=storage.js.map"]},"metadata":{},"sourceType":"module"}